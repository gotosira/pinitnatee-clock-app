import{u as k,r as l,g as R,a as I,i as N,j as o,b as M,c as Y}from"./index-T1da_EPQ.js";const x=[1,6,4,2,7,5,3],C=s=>(s-1)%7+1,A=s=>{const i=x.indexOf(s);return x[(i+1)%7]};function E(s){const i=M(s),f=R(s),u=Y(s),n=[],y=[i,f,u];for(let e=0;e<3;e++){const a=[];for(let b=0;b<7;b++)a.push((y[e]-1+b)%7+1);n.push(a)}const S=Array.from({length:7},(e,a)=>n[0][a]+n[1][a]+n[2][a]),v=S.map(C);n.push(S),n.push(v);const h=Array(7),m=n[4].findIndex(e=>e===7),j=[7,6,5,4,3,2,1];for(let e=0;e<7;e++)h[(m+e)%7]=j[e];n.push(h);const d=Array(7),w=[7,5,3,1,6,4,2];for(let e=0;e<7;e++)d[(m+e)%7]=w[e];n.push(d);const g=n[4][0],p=x.indexOf(g),t=Array.from({length:7},(e,a)=>x[(p+a)%7]);n.push(t);const r=Array(7),c=C(t[5]+t[6]);r[6]=c;for(let e=5;e>=0;e--)r[e]=A(r[e+1]);return n.push(r),n}function T(){const{now:s}=k(),i=l.useMemo(()=>E(s),[s.getTime()]),[f,u]=l.useState(()=>{try{const t=localStorage.getItem("sevenPicked");return t?Number(t):null}catch{return null}}),[n,y]=l.useState(()=>{try{const t=localStorage.getItem("sevenShowRow4");return t?t==="1":!0}catch{return!0}}),v=l.useMemo(()=>R(s),[s.getTime()]),h=f??v,m=l.useMemo(()=>new Set([0,1,2,4,7,8]),[]),[j]=I(),d=l.useCallback(t=>{u(t);try{localStorage.setItem("sevenPicked",String(t)),window.dispatchEvent(new Event("localStorageChange"))}catch{}},[]),w=l.useMemo(()=>{const t=s.getHours(),r=s.getMinutes(),c=s.getSeconds(),e=r+c/60;return N(s)?((t-6)*60+e)%90:((t>=18?(t-18)*60:(t+6)*60)+e)%90},[s]),g=w<=30?0:w<=60?1:2,p=i[1]?.[0];return o.jsxs("div",{className:`seven-wrapper ${j==="watchface"?"theme-watchface":"theme-simple"} ${n?"show-row4":""}`,"aria-hidden":"true",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,marginBottom:8},children:[o.jsx("div",{style:{fontSize:12,opacity:.8},children:"แถว 4: ผลรวมต่อคอลัมน์"}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"ghost small",onClick:()=>{const t=!n;y(t);try{localStorage.setItem("sevenShowRow4",t?"1":"0")}catch{}},children:n?"Hide Row 4":"Show Row 4"}),o.jsx("button",{className:"ghost small",onClick:()=>{u(null);try{localStorage.removeItem("sevenPicked")}catch{}},children:"Reset"})]})]}),o.jsx("table",{className:"seven-table",children:o.jsx("tbody",{children:i.map((t,r)=>o.jsx("tr",{children:t.map((c,e)=>o.jsx("td",{className:m.has(r)&&c===h?"hl":void 0,onClick:()=>d(c),children:o.jsxs("span",{children:[c,r===g&&c===p?" ":"",r===g&&c===p?o.jsx("span",{className:"star",children:"⭐"}):null]})},e))},r))})})]})}export{T as default};
