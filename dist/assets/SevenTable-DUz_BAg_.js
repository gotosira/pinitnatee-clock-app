import{u as N,r as u,g as k,a as I,i as M,j as o,b as R,c as Y}from"./index-BX_mdZih.js";const w=[1,6,4,2,7,5,3],S=t=>(t-1)%7+1,A=t=>{const i=w.indexOf(t);return w[(i+1)%7]};function E(t){const i=R(t),y=k(t),h=Y(t),n=[],v=[i,y,h];for(let e=0;e<3;e++){const a=[];for(let j=0;j<7;j++)a.push((v[e]-1+j)%7+1);n.push(a)}const d=Array.from({length:7},(e,a)=>n[0][a]+n[1][a]+n[2][a]),C=d.map(S);n.push(d),n.push(C);const g=Array(7),p=n[4].findIndex(e=>e===7),f=[7,6,5,4,3,2,1];for(let e=0;e<7;e++)g[(p+e)%7]=f[e];n.push(g);const m=Array(7),x=[7,5,3,1,6,4,2];for(let e=0;e<7;e++)m[(p+e)%7]=x[e];n.push(m);const r=n[4][0],s=w.indexOf(r),l=Array.from({length:7},(e,a)=>w[(s+a)%7]);n.push(l);const c=Array(7),b=S(l[5]+l[6]);c[6]=b;for(let e=5;e>=0;e--)c[e]=A(c[e+1]);return n.push(c),n}function T(){const{now:t}=N(),i=u.useMemo(()=>E(t),[t.getTime()]),[y,h]=u.useState(()=>{try{const r=localStorage.getItem("sevenPicked");return r?Number(r):null}catch{return null}}),v=u.useMemo(()=>k(t),[t.getTime()]),d=y??v,C=u.useMemo(()=>new Set([0,1,2,4,7,8]),[]),[g]=I(),p=u.useCallback(r=>{h(r);try{localStorage.setItem("sevenPicked",String(r)),window.dispatchEvent(new Event("localStorageChange"))}catch{}},[]),f=u.useMemo(()=>{const r=t.getHours(),s=t.getMinutes(),l=t.getSeconds(),c=s+l/60;return M(t)?((r-6)*60+c)%90:((r>=18?(r-18)*60:(r+6)*60)+c)%90},[t]),m=f<=30?0:f<=60?1:2,x=i[1]?.[0];return o.jsxs("div",{className:`seven-wrapper ${g==="watchface"?"theme-watchface":"theme-simple"}`,"aria-hidden":"true",children:[o.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:8,marginBottom:8},children:o.jsx("button",{className:"ghost small",onClick:()=>{h(null);try{localStorage.removeItem("sevenPicked")}catch{}},children:"Reset"})}),o.jsx("table",{className:"seven-table",children:o.jsx("tbody",{children:i.map((r,s)=>{if(s===5||s===6)return null;const l=s<3?"g1":s===3?"g2":s===4?"g3":s===7||s===8?"g4":"";return o.jsx("tr",{className:l,children:r.map((c,b)=>o.jsx("td",{className:C.has(s)&&c===d?"hl":void 0,onClick:()=>p(c),children:o.jsxs("span",{children:[c,s===m&&c===x?" ":"",s===m&&c===x?o.jsx("span",{className:"star",children:"‚≠ê"}):null]})},b))},s)})})})]})}export{T as default};
