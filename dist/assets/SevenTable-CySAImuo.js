import{u as N,r as u,g as S,a as I,i as M,j as a,b as R,c as Y}from"./index-DZ3-G0SI.js";const w=[1,6,4,2,7,5,3],C=t=>(t-1)%7+1,A=t=>{const i=w.indexOf(t);return w[(i+1)%7]};function E(t){const i=R(t),y=S(t),h=Y(t),s=[],v=[i,y,h];for(let e=0;e<3;e++){const l=[];for(let j=0;j<7;j++)l.push((v[e]-1+j)%7+1);s.push(l)}const d=Array.from({length:7},(e,l)=>s[0][l]+s[1][l]+s[2][l]),b=d.map(C);s.push(d),s.push(b);const g=Array(7),p=s[4].findIndex(e=>e===7),f=[7,6,5,4,3,2,1];for(let e=0;e<7;e++)g[(p+e)%7]=f[e];s.push(g);const m=Array(7),x=[7,5,3,1,6,4,2];for(let e=0;e<7;e++)m[(p+e)%7]=x[e];s.push(m);const n=s[4][0],o=w.indexOf(n),r=Array.from({length:7},(e,l)=>w[(o+l)%7]);s.push(r);const c=Array(7),k=C(r[5]+r[6]);c[6]=k;for(let e=5;e>=0;e--)c[e]=A(c[e+1]);return s.push(c),s}function T(){const{now:t}=N(),i=u.useMemo(()=>E(t),[t.getTime()]),[y,h]=u.useState(()=>{try{const n=localStorage.getItem("sevenPicked");return n?Number(n):null}catch{return null}}),v=u.useMemo(()=>S(t),[t.getTime()]),d=y??v,b=u.useMemo(()=>new Set([0,1,2,4,7,8]),[]),[g]=I(),p=u.useCallback(n=>{h(n);try{localStorage.setItem("sevenPicked",String(n)),window.dispatchEvent(new Event("localStorageChange"))}catch{}},[]),f=u.useMemo(()=>{const n=t.getHours(),o=t.getMinutes(),r=t.getSeconds(),c=o+r/60;return M(t)?((n-6)*60+c)%90:((n>=18?(n-18)*60:(n+6)*60)+c)%90},[t]),m=f<=30?0:f<=60?1:2,x=i[1]?.[0];return a.jsxs("div",{className:`seven-wrapper ${g==="watchface"?"theme-watchface":"theme-simple"}`,"aria-hidden":"true",children:[a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:8,marginBottom:8},children:a.jsx("button",{className:"ghost small",onClick:()=>{h(null);try{localStorage.removeItem("sevenPicked")}catch{}},children:"Reset"})}),a.jsx("table",{className:"seven-table",children:a.jsx("tbody",{children:i.map((n,o)=>o===5||o===6?null:a.jsx("tr",{children:n.map((r,c)=>a.jsx("td",{className:b.has(o)&&r===d?"hl":void 0,onClick:()=>p(r),children:a.jsxs("span",{children:[r,o===m&&r===x?" ":"",o===m&&r===x?a.jsx("span",{className:"star",children:"‚≠ê"}):null]})},c))},o))})})]})}export{T as default};
